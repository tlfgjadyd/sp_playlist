# MyPlaylist 프로젝트 기능 명세 (v1 - 2025-11-18)

## 1. 핵심 기능
Spotify API를 활용하여 사용자가 자신만의 플레이리스트를 만들고, Spotify의 곡들을 저장 및 관리할 수 있는 웹 애플리케이션.

## 2. 상세 기능 목록

### 2.1. 사용자 인증 및 계정
- **Spotify 소셜 로그인**: Spring Security OAuth2 클라이언트를 통해 Spotify 계정만으로 로그인.
- **자동 회원가입**: 첫 로그인 시, Spotify로부터 받은 정보(ID, 이름, 이메일)를 기반으로 `users` 테이블에 사용자 정보를 자동으로 저장.
- **안정적인 사용자 생성**: 사용자 이름 또는 이메일이 없거나 중복될 경우, 고유한 값을 생성하여 가입 오류를 방지.
- **자동 토큰 갱신**: Access Token 만료 시, 저장된 Refresh Token을 사용하여 자동으로 토큰을 갱신하여 세션을 유지.
- **영구적인 Refresh Token 요청**: 로그인 시 항상 Refresh Token을 발급받도록 `approval_prompt=force` 설정을 적용하여 로그인 안정성 확보.

### 2.2. 플레이리스트 관리
- **플레이리스트 생성**: 이름과 설명을 입력하여 자신만의 새로운 플레이리스트를 생성.
- **내 플레이리스트 목록**: 자신이 생성한 모든 플레이리스트의 목록을 확인.
- **플레이리스트 상세 조회**: 특정 플레이리스트를 클릭하여 포함된 모든 곡의 목록을 확인.
- **플레이리스트 삭제**:
    - 플레이리스트 목록에서 'Delete' 버튼을 통해 플레이리스트를 삭제.
    - 삭제 시, "수록곡이 모두 삭제됩니다" 라는 확인창을 통해 사용자 실수를 방지.
    - 데이터베이스의 `ON DELETE CASCADE` 설정을 통해 플레이리스트와 모든 수록곡을 한 번에 삭제.

### 2.3. 트랙(곡) 관리
- **플레이리스트에 곡 추가**:
    - 검색 결과, Top 트랙 등 다양한 페이지에서 'Add to Playlist' 버튼을 통해 곡을 추가.
    - 페이지 이동 없이, 팝업(모달) 창에서 추가할 플레이리스트를 선택.
    - 추가 완료 후, 화면 우측 하단에 "성공적으로 추가되었습니다" 라는 알림(토스트) 메시지를 표시하여 사용자 경험 향상.
- **중복 곡 추가 방지**: 동일한 곡이 한 플레이리스트에 중복으로 추가되는 것을 방지.
- **플레이리스트에서 곡 삭제**: 플레이리스트 상세 페이지에서 특정 곡을 개별적으로 삭제.

### 2.4. 음악 탐색
- **트랙 검색**: Spotify의 방대한 음악 라이브러리에서 원하는 곡을 검색.
- **무한 스크롤**: 검색 결과가 많을 경우, 페이지를 아래로 스크롤하면 다음 결과가 자동으로 로딩.
- **나의 Top 트랙**: 사용자가 최근 가장 많이 들은 곡 목록을 확인.
- **최신 발매 앨범**: Spotify의 최신 발매 앨범 목록을 확인.

### 2.5. UI / UX
- **일관된 디자인**: Bootstrap을 적용하여 모든 페이지에 통일되고 현대적인 UI를 제공.
- **전역 네비게이션 바**: 어느 페이지에서든 다른 주요 기능으로 쉽게 이동할 수 있는 상단 메뉴.
- **비동기 처리**: 곡 추가와 같은 기능들을 페이지 새로고침 없이 처리하여 부드러운 사용자 경험을 제공.
