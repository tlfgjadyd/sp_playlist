# MyPlaylist 프로젝트 진행 상황 (2025-11-15)

## 1. 핵심 목표
Spotify API를 활용하여 사용자가 자신만의 플레이리스트를 만들고, Spotify의 곡들을 저장 및 관리할 수 있는 웹 애플리케이션을 구축한다.

## 2. 현재까지 구현된 기능

### 2.1. 사용자 인증 (Spotify 소셜 로그인)
- **인증 방식:** Spring Security OAuth2 클라이언트를 사용하여 Spotify 계정만으로 로그인하는 '소셜 로그인' 방식을 채택.
- **사용자 관리:**
    - 최초 로그인 시, Spotify로부터 받은 사용자 정보(Spotify ID, 이름, 이메일)를 기반으로 `users` 테이블에 사용자 정보를 자동으로 저장 (자동 회원가입).
    - 재로그인 시, Spotify ID를 기준으로 기존 사용자를 식별.
- **토큰 관리:**
    - 로그인 성공 시, Spotify로부터 발급받은 Access Token과 Refresh Token을 `users` 테이블의 해당 사용자 레코드에 저장.
    - 이 토큰은 이후 해당 사용자의 Spotify API 호출에 사용됨.

### 2.2. 플레이리스트 관리
- **플레이리스트 생성:**
    - 로그인한 사용자는 `/playlists/create` 페이지를 통해 새로운 플레이리스트(이름, 설명)를 생성하고 DB(`playlists` 테이블)에 저장할 수 있다.
- **플레이리스트 목록 조회:**
    - `/playlists/my` 페이지에서 현재 로그인한 사용자가 생성한 모든 플레이리스트의 목록을 확인할 수 있다.

### 2.3. Spotify 곡 연동
- **최신 앨범 조회:**
    - `/new-releases` 페이지에서 Spotify의 최신 앨범 목록을 조회할 수 있다.
- **곡 추가 기능:**
    - `new-releases` 페이지의 각 앨범 옆에 있는 "Add to Playlist" 버튼을 통해 곡 추가 프로세스를 시작할 수 있다.
    - 사용자는 자신의 플레이리스트 목록 중 하나를 선택하여 해당 곡의 정보(트랙 ID, 이름, 아티스트, 이미지 URL 등)를 DB(`playlist_tracks` 테이블)에 저장할 수 있다.

### 2.4. 기술 스택 및 주요 설정
- **백엔드:** Java, Spring Boot, Spring Security (OAuth2 Client)
- **데이터베이스:** MySQL
- **DB 연동:** MyBatis
- **템플릿 엔진:** Thymeleaf
- **개발 환경:**
    - `ngrok`을 사용하여 로컬 환경에서 HTTPS가 필요한 Spotify OAuth2 콜백을 처리.
    - `application.yml`에 `server.forward-headers-strategy` 및 `server.tomcat.use-forward-headers`를 설정하여 프록시 환경 문제를 해결.

## 3. 다음 단계 계획
1.  **플레이리스트 상세 페이지 구현:**
    - 사용자가 생성한 각 플레이리스트를 클릭했을 때, 해당 플레이리스트에 담긴 곡들의 목록을 보여주는 상세 페이지를 구현한다.
    - (선택) 상세 페이지에서 곡을 삭제하는 기능을 추가한다.
2.  **Spotify API 토큰 자동 갱신 로직 강화:**
    - Access Token 만료 시, DB에 저장된 Refresh Token을 사용하여 자동으로 토큰을 갱신하는 로직을 안정적으로 구현한다.
3.  **메인 화면 기능 구현:**
    - Spotify 곡을 검색하고 결과를 보여주는 기능을 구현한다.
    - (선택) 검색 결과를 무한 스크롤 방식으로 로드하는 기능을 추가한다.
