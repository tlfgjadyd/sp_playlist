CREATE TABLE `users` (
   `id` int NOT NULL AUTO_INCREMENT,
   `username` varchar(50) NOT NULL,
   `email` varchar(100) NOT NULL,
   `spotify_user_id` varchar(100) DEFAULT NULL,
   `created_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
   `spotify_access_token` varchar(300) DEFAULT NULL,
   `spotify_refresh_token` varchar(255) DEFAULT NULL,
   `spotify_access_token_expires_at` datetime(6) DEFAULT NULL,
   PRIMARY KEY (`id`),
   UNIQUE KEY `email` (`email`),
   UNIQUE KEY `username` (`username`),
   UNIQUE KEY `spotify_user_id` (`spotify_user_id`)
 )


 CREATE TABLE `playlist_tracks` (
    `id` int NOT NULL AUTO_INCREMENT,
    `playlist_id` int NOT NULL,
    `track_id` varchar(100) NOT NULL,
    `track_name` varchar(200) NOT NULL,
    `artist_name` varchar(200) DEFAULT NULL,
    `image_url` varchar(300) DEFAULT NULL,
    `created_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY (`id`),
    UNIQUE KEY `playlist_id` (`playlist_id`,`track_id`),
    CONSTRAINT `playlist_tracks_ibfk_1` FOREIGN KEY (`playlist_id`) REFERENCES `playlists` (`id`) ON DELETE CASCADE
  )


  CREATE TABLE `playlists` (
     `id` int NOT NULL AUTO_INCREMENT,
     `user_id` int NOT NULL,
     `name` varchar(100) NOT NULL,
     `description` text,
     `created_at` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
     PRIMARY KEY (`id`),
     KEY `user_id` (`user_id`),
     CONSTRAINT `playlists_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE
   )